.. code-block:: xml
    INFO:kolla.image.build:===========================
    INFO:kolla.image.build:Images that failed to build
    INFO:kolla.image.build:===========================
    ERROR:kolla.image.build:telegraf Failed with status: parent_error
    ERROR:kolla.image.build:aodh-expirer Failed with status: matched
    ERROR:kolla.image.build:bifrost-deploy Failed with status: matched
    ERROR:kolla.image.build:heat-api-cfn Failed with status: matched
    ERROR:kolla.image.build:cinder-base Failed with status: parent_error
    ERROR:kolla.image.build:sahara-api Failed with status: error
    ERROR:kolla.image.build:swift-container Failed with status: matched
    ERROR:kolla.image.build:swift-proxy-server Failed with status: matched
    ERROR:kolla.image.build:trove-api Failed with status: matched
    ERROR:kolla.image.build:grafana Failed with status: parent_error
    ERROR:kolla.image.build:aodh-notifier Failed with status: matched
    ERROR:kolla.image.build:mistral-base Failed with status: parent_error
    ERROR:kolla.image.build:gnocchi-base Failed with status: parent_error
    ERROR:kolla.image.build:openvswitch-vswitchd Failed with status: matched
    ERROR:kolla.image.build:tgtd Failed with status: error
    ERROR:kolla.image.build:kuryr-base Failed with status: parent_error
    ERROR:kolla.image.build:trove-base Failed with status: parent_error
    ERROR:kolla.image.build:iscsid Failed with status: error
    ERROR:kolla.image.build:nova-api Failed with status: matched
    ERROR:kolla.image.build:magnum-base Failed with status: parent_error
    ERROR:kolla.image.build:keystone Failed with status: matched
    ERROR:kolla.image.build:aodh-base Failed with status: parent_error
    ERROR:kolla.image.build:watcher-api Failed with status: matched
    ERROR:kolla.image.build:keystone-fernet Failed with status: matched
    ERROR:kolla.image.build:neutron-vpnaas-agent Failed with status: matched
    ERROR:kolla.image.build:neutron-server Failed with status: matched
    ERROR:kolla.image.build:ceilometer-notification Failed with status: matched
    ERROR:kolla.image.build:magnum-conductor Failed with status: matched
    ERROR:kolla.image.build:murano-api Failed with status: matched
    ERROR:kolla.image.build:mistral-executor Failed with status: matched
    ERROR:kolla.image.build:nova-spicehtml5proxy Failed with status: matched
    ERROR:kolla.image.build:aodh-api Failed with status: matched
    ERROR:kolla.image.build:nova-libvirt Failed with status: matched
    ERROR:kolla.image.build:kuryr-libnetwork Failed with status: matched
    ERROR:kolla.image.build:cinder-api Failed with status: matched
    ERROR:kolla.image.build:rabbitmq Failed with status: parent_error
    ERROR:kolla.image.build:manila-api Failed with status: error
    ERROR:kolla.image.build:neutron-sfc-agent Failed with status: matched
    ERROR:kolla.image.build:sahara-base Failed with status: error
    ERROR:kolla.image.build:cinder-volume Failed with status: matched
    ERROR:kolla.image.build:nova-base Failed with status: parent_error
    ERROR:kolla.image.build:collectd Failed with status: error
    ERROR:kolla.image.build:cron Failed with status: error
    ERROR:kolla.image.build:designate-api Failed with status: matched
    ERROR:kolla.image.build:aodh-evaluator Failed with status: matched
    ERROR:kolla.image.build:designate-pool-manager Failed with status: matched
    ERROR:kolla.image.build:neutron-lbaas-agent Failed with status: matched
    ERROR:kolla.image.build:tempest Failed with status: error
    ERROR:kolla.image.build:keystone-base Failed with status: parent_error
    ERROR:kolla.image.build:trove-guestagent Failed with status: matched
    ERROR:kolla.image.build:neutron-linuxbridge-agent Failed with status: matched
    ERROR:kolla.image.build:nova-ssh Failed with status: matched
    ERROR:kolla.image.build:magnum-api Failed with status: matched
    ERROR:kolla.image.build:keepalived Failed with status: parent_error
    ERROR:kolla.image.build:senlin-engine Failed with status: matched
    ERROR:kolla.image.build:openstack-base Failed with status: error
    ERROR:kolla.image.build:swift-object-expirer Failed with status: matched
    ERROR:kolla.image.build:ceph-mon Failed with status: matched
    ERROR:kolla.image.build:memcached Failed with status: parent_error
    ERROR:kolla.image.build:barbican-keystone-listener Failed with status: matched
    ERROR:kolla.image.build:neutron-metering-agent Failed with status: matched
    ERROR:kolla.image.build:barbican-worker Failed with status: matched
    ERROR:kolla.image.build:influxdb Failed with status: parent_error
    ERROR:kolla.image.build:heka Failed with status: error
    ERROR:kolla.image.build:base Failed with status: error
    ERROR:kolla.image.build:multipathd Failed with status: error
    ERROR:kolla.image.build:cinder-scheduler Failed with status: matched
    ERROR:kolla.image.build:haproxy Failed with status: parent_error
    ERROR:kolla.image.build:watcher-applier Failed with status: matched
    ERROR:kolla.image.build:murano-engine Failed with status: matched
    ERROR:kolla.image.build:ceilometer-collector Failed with status: matched
    ERROR:kolla.image.build:glance-api Failed with status: matched
    ERROR:kolla.image.build:swift-base Failed with status: parent_error
    ERROR:kolla.image.build:elasticsearch Failed with status: parent_error
    ERROR:kolla.image.build:horizon Failed with status: parent_error
    ERROR:kolla.image.build:nova-network Failed with status: matched
    ERROR:kolla.image.build:vmtp Failed with status: parent_error
    ERROR:kolla.image.build:designate-sink Failed with status: matched
    ERROR:kolla.image.build:murano-base Failed with status: parent_error
    ERROR:kolla.image.build:dind Failed with status: parent_error
    ERROR:kolla.image.build:kolla-toolbox Failed with status: parent_error
    ERROR:kolla.image.build:watcher-engine Failed with status: matched
    ERROR:kolla.image.build:neutron-openvswitch-agent Failed with status: matched
    ERROR:kolla.image.build:ceilometer-compute Failed with status: matched
    ERROR:kolla.image.build:manila-scheduler Failed with status: error
    ERROR:kolla.image.build:ceilometer-central Failed with status: matched
    ERROR:kolla.image.build:cloudkitty-base Failed with status: parent_error
    ERROR:kolla.image.build:nova-novncproxy Failed with status: matched
    ERROR:kolla.image.build:nova-serialproxy Failed with status: matched
    ERROR:kolla.image.build:senlin-api Failed with status: matched
    ERROR:kolla.image.build:designate-backend-bind9 Failed with status: matched
    ERROR:kolla.image.build:etcd Failed with status: error
    ERROR:kolla.image.build:gnocchi-api Failed with status: matched
    ERROR:kolla.image.build:ceilometer-base Failed with status: parent_error
    ERROR:kolla.image.build:heat-api Failed with status: matched
    ERROR:kolla.image.build:openvswitch-db-server Failed with status: matched
    ERROR:kolla.image.build:cinder-backup Failed with status: matched
    ERROR:kolla.image.build:nova-conductor Failed with status: matched
    ERROR:kolla.image.build:heat-base Failed with status: parent_error
    ERROR:kolla.image.build:designate-central Failed with status: matched
    ERROR:kolla.image.build:neutron-l3-agent Failed with status: matched
    ERROR:kolla.image.build:kibana Failed with status: parent_error
    ERROR:kolla.image.build:ironic-api Failed with status: matched
    ERROR:kolla.image.build:heat-engine Failed with status: matched
    ERROR:kolla.image.build:mistral-api Failed with status: matched
    ERROR:kolla.image.build:cinder-rpcbind Failed with status: matched
    ERROR:kolla.image.build:swift-object Failed with status: matched
    ERROR:kolla.image.build:openvswitch-base Failed with status: parent_error
    ERROR:kolla.image.build:ceph-base Failed with status: parent_error
    ERROR:kolla.image.build:sahara-engine Failed with status: error
    ERROR:kolla.image.build:congress-datasource Failed with status: matched
    ERROR:kolla.image.build:ceilometer-api Failed with status: matched
    ERROR:kolla.image.build:trove-taskmanager Failed with status: matched
    ERROR:kolla.image.build:swift-rsyncd Failed with status: matched
    ERROR:kolla.image.build:aodh-listener Failed with status: matched
    ERROR:kolla.image.build:glance-registry Failed with status: matched
    ERROR:kolla.image.build:barbican-api Failed with status: matched
    ERROR:kolla.image.build:cloudkitty-api Failed with status: matched
    ERROR:kolla.image.build:ceph-rgw Failed with status: matched
    ERROR:kolla.image.build:congress-base Failed with status: parent_error
    ERROR:kolla.image.build:rally Failed with status: parent_error
    ERROR:kolla.image.build:ironic-base Failed with status: parent_error
    ERROR:kolla.image.build:mistral-engine Failed with status: matched
    ERROR:kolla.image.build:zaqar Failed with status: error
    ERROR:kolla.image.build:nova-consoleauth Failed with status: matched
    ERROR:kolla.image.build:designate-base Failed with status: parent_error
    ERROR:kolla.image.build:neutron-dhcp-agent Failed with status: matched
    ERROR:kolla.image.build:neutron-base Failed with status: parent_error
    ERROR:kolla.image.build:watcher-base Failed with status: parent_error
    ERROR:kolla.image.build:designate-mdns Failed with status: matched
    ERROR:kolla.image.build:gnocchi-metricd Failed with status: matched
    ERROR:kolla.image.build:mongodb Failed with status: parent_error
    ERROR:kolla.image.build:ironic-inspector Failed with status: matched
    ERROR:kolla.image.build:cloudkitty-processor Failed with status: matched
    ERROR:kolla.image.build:ironic-conductor Failed with status: matched
    ERROR:kolla.image.build:nova-scheduler Failed with status: matched
    ERROR:kolla.image.build:manila-base Failed with status: error
    ERROR:kolla.image.build:manila-share Failed with status: error
    ERROR:kolla.image.build:glance-base Failed with status: parent_error
    ERROR:kolla.image.build:senlin-base Failed with status: parent_error
    ERROR:kolla.image.build:ceph-osd Failed with status: matched
    ERROR:kolla.image.build:mariadb Failed with status: parent_error
    ERROR:kolla.image.build:congress-policy-engine Failed with status: matched
    ERROR:kolla.image.build:congress-api Failed with status: matched
    ERROR:kolla.image.build:swift-account Failed with status: matched
    ERROR:kolla.image.build:bifrost-base Failed with status: parent_error
    ERROR:kolla.image.build:nova-compute Failed with status: matched
    ERROR:kolla.image.build:neutron-metadata-agent Failed with status: matched
    ERROR:kolla.image.build:nova-compute-ironic Failed with status: matched
    ERROR:kolla.image.build:keystone-ssh Failed with status: matched
    ERROR:kolla.image.build:barbican-base Failed with status: parent_error
    ERROR:kolla.image.build:ironic-pxe Failed with status: matched
    ERROR:kolla.image.build:gnocchi-statsd Failed with status: matched
    ERROR:kolla.image.build:trove-conductor Failed with status: matched

.. code-block:: xml
    [centos@qiwei-kolla ~]$ 
    Message from syslogd@qiwei-kolla at Feb 28 01:10:35 ...
     kernel:unregister_netdevice: waiting for lo to become free. Usage count = 1

No solutions found yet
https://github.com/coreos/bugs/issues/254
Try updating kernel
yum -y update kernel
Try upgrading kernel
reference:
http://www.cnblogs.com/zhaojiedi1992/p/zhaojiedi_linux_003.html

attention:
when setting up local registry 
.. code-block:: bash
    docker run -d -p 4000:5000 --restart=always --name registry \
    -v <local_data_path>:/var/lib/registry registry
the port is very important. The default port of Docker registry is 5000. But the 5000 port is also the port of keystone-api. To avoid conflict, use 4000 port as Docker registry port. 


error:
kolla-build --registry 192.168.133.51:4000 --push
Traceback (most recent call last):
  File "/usr/bin/kolla-build", line 7, in <module>
    from kolla.cmd.build import main
  File "/usr/lib/python2.7/site-packages/kolla/__init__.py", line 15, in <module>
    import pbr.version
  File "/usr/lib/python2.7/site-packages/pbr/version.py", line 25, in <module>
    import pkg_resources
  File "/usr/lib/python2.7/site-packages/pkg_resources/__init__.py", line 72, in <module>
    import packaging.requirements
  File "/usr/lib/python2.7/site-packages/packaging/requirements.py", line 59, in <module>
    MARKER_EXPR = originalTextFor(MARKER_EXPR())("marker")
TypeError: __call__() takes exactly 2 arguments (1 given)

solved by:
pip install setuptools==33.1.1


error on prechecks:
.. code-block:: xml
    TASK [prechecks : Check if all rabbit hostnames are resolvable] ****************
    failed: [localhost] (item=localhost) => {"changed": false, "cmd": ["getent", "ahostsv4", "qiwei-kolla"], "delta": "0:00:00.088763", "end": "2017-02-28 23:56:00.450452", "failed": true, "item": "localhost", "rc": 2, "start": "2017-02-28 23:56:00.361689", "stderr": "", "stdout": "", "stdout_lines": [], "warnings": []}
            to retry, use: --limit @/usr/share/kolla/ansible/prechecks.retry
    
    PLAY RECAP *********************************************************************
    localhost                  : ok=56   changed=0    unreachable=0    failed=1   

Solution Verified:
add 192.168.133.51 qiwei-kolla to 
/etc/hosts


error on pulling images from local registry:
.. code-block:: xml
    TASK [common : Pulling kolla-toolbox image] ************************************
    fatal: [localhost]: FAILED! => {"changed": true, "failed": true, "msg": "'Traceback (most recent call last):\\n  File \"/tmp/ansible_hVJWE3/ansible_module_kolla_docker.py\", line 745, in main\\n    result = bool(getattr(dw, module.params.get(\\'action\\'))())\\n  File \"/tmp/ansible_hVJWE3/ansible_module_kolla_docker.py\", line 430, in pull_image\\n    repository=image, tag=tag, stream=True\\n  File \"/usr/lib/python2.7/site-packages/docker/api/image.py\", line 200, in pull\\n    self._raise_for_status(response)\\n  File \"/usr/lib/python2.7/site-packages/docker/client.py\", line 146, in _raise_for_status\\n    raise errors.APIError(e, response, explanation=explanation)\\nAPIError: 500 Server Error: Internal Server Error (\"{\"message\":\"Get https://192.168.133.51:4000/v1/_ping: http: server gave HTTP response to HTTPS client\"}\")\\n'"}
            to retry, use: --limit @/usr/share/kolla/ansible/site.retry
    
    PLAY RECAP *********************************************************************
    localhost                  : ok=8    changed=0    unreachable=0    failed=1   

Solution
Try putting registry on another machine

Docker config files(centos):
/etc/docker/daemon.json
/etc/systemd/system/docker.service.d/docker.conf
/etc/sysconfig/docker


attention:
Make sure there is enough disk space on host machine. 